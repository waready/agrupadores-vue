"use strict";(self["webpackChunkIndicadores"]=self["webpackChunkIndicadores"]||[]).push([[877],{46144:function(a,s,e){e.r(s),e.d(s,{default:function(){return fa}});var t=e(73396),l=e(87139),r=e(49242);const o={class:"container"},i=(0,t._)("h2",null,"Sucursales",-1),c={key:0},n=(0,t._)("hr",null,null,-1),d={class:"row"},u={class:"col-7 d-flex justify-content-center"},m={class:"col-5"},g={class:"col-12"},C={class:"card"},p={class:"card-content"},h={class:"card-body"},f={class:"media d-flex"},_=(0,t._)("div",{class:"align-self-center"},[(0,t._)("i",{class:"icon-pie-chart dark font-large-1 float-left"})],-1),b={class:"media-body text-right"},w=(0,t._)("span",null,"Sucursales Abiertas",-1),v={class:"col-12"},y={class:"card"},A={class:"card-content"},S={class:"card-body"},j={class:"media d-flex"},k=(0,t._)("div",{class:"align-self-center"},[(0,t._)("i",{class:"icon-pie-chart success font-large-1 float-left"})],-1),x={class:"media-body text-right"},T=(0,t._)("span",null,"Sucursales Cerradas",-1),P=(0,t._)("hr",null,null,-1),M={class:"nav nav-tabs mb-1"},B={class:"nav-item"},E={class:"nav-item"},I={class:"row"},R={class:"col-md-12 card"},D={class:"card-body"},z=(0,t._)("h3",null,"Sucursales Abiertas",-1),F={class:""},N=["onClick"],U=(0,t._)("i",{class:"fas fa-map-marker-alt text-white"},null,-1),O=[U],V=["onClick"],q=(0,t._)("i",{class:"fas fa-eye text-white ml-1"},null,-1),Z=["onClick"],J=(0,t._)("i",{class:"fas fa-eye text-white ml-1"},null,-1),W={key:1,class:"alert alert-warning mt-1",role:"alert"},G=(0,t._)("h3",null,"Sucursales Cerradas",-1),H=["onClick"],K=(0,t._)("i",{class:"fas fa-map-marker-alt text-white"},null,-1),Q=[K],X=["onClick"],Y=["onClick"],aa={key:1,class:"alert alert-warning mt-1",role:"alert"},sa={class:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},ea={class:"modal-dialog modal-dialog-centered",role:"document"},ta={class:"modal-content"},la=(0,t._)("div",{class:"modal-header"},[(0,t._)("h5",{class:"modal-title",id:"exampleModalLongTitle"}," Mapa geolocalización "),(0,t._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[(0,t._)("span",{"aria-hidden":"true"},"×")])],-1),ra={class:"modal-body"},oa={ref:"elMap",class:"app-store-map"},ia=(0,t._)("div",{class:"modal-footer"},[(0,t._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ")],-1);function ca(a,s,e,U,$,L){const K=(0,t.up)("Pie"),ca=(0,t.up)("v-client-table"),na=(0,t.up)("loading");return(0,t.wg)(),(0,t.iD)("div",o,[i,(0,t.wy)((0,t._)("div",{class:"alert alert-warning",role:"alert"},(0,l.zw)($.message+"!"),513),[[r.F8,$.message]]),$.sucursales?((0,t.wg)(),(0,t.iD)("div",c,[n,(0,t._)("div",d,[(0,t._)("div",u,[(0,t.Wm)(K,{id:"my-chart-id",data:$.chartData,style:(0,l.j5)(L.myStyles),options:$.chartOptions},null,8,["data","style","options"])]),(0,t._)("div",m,[(0,t._)("div",g,[(0,t._)("div",C,[(0,t._)("div",p,[(0,t._)("div",h,[(0,t._)("div",f,[_,(0,t._)("div",b,[(0,t._)("h4",null,(0,l.zw)($.sucursalcantA),1),w])])])])])]),(0,t._)("div",v,[(0,t._)("div",y,[(0,t._)("div",A,[(0,t._)("div",S,[(0,t._)("div",j,[k,(0,t._)("div",x,[(0,t._)("h4",null,(0,l.zw)($.sucursalcantC),1),T])])])])])])])]),P,(0,t._)("ul",M,[(0,t._)("li",B,[(0,t._)("a",{class:(0,l.C_)(["nav-link",{active:1==$.sucursalA}]),onClick:s[0]||(s[0]=a=>L.selecionar(1))}," Sucursales Abiertas ",2)]),(0,t._)("li",E,[(0,t._)("a",{class:(0,l.C_)(["nav-link",{active:1==$.sucursalC}]),onClick:s[1]||(s[1]=a=>L.selecionar(2))}," Sucursales Cerradas ",2)])]),(0,t._)("div",I,[(0,t._)("div",R,[(0,t._)("div",D,[(0,t.wy)((0,t._)("div",null,[z,(0,t._)("div",F,[$.sucusalesPremiun[0]?((0,t.wg)(),(0,t.j4)(ca,{key:0,ref:"table",data:$.sucusalesPremiun,columns:$.columns,options:$.options},{direccion:(0,t.w5)((a=>[(0,t._)("p",null,[(0,t.Uk)((0,l.zw)(a.row.direccion)+" ",1),(0,t._)("a",{"data-toggle":"modal","data-placement":"top",title:"Ver mapa",onClick:s=>L.generarMapa(a.row.latitud,a.row.longitud),"data-target":"#exampleModalCenter",class:(0,l.C_)(["letter","badge badge-primary ml-1 font-weight-bold"])},O,8,N)])])),cantidadA:(0,t.w5)((a=>[(0,t._)("a",{onClick:s=>L.obtenerCajasA(a.row),"data-toggle":"tooltip","data-placement":"top",title:"Ver cajas",class:(0,l.C_)(["letter","badge badge-secondary text-white font-weight-bold"])},[(0,t.Uk)((0,l.zw)(a.row.cantidadA)+" ",1),q],8,V)])),cantidadC:(0,t.w5)((a=>[(0,t._)("a",{onClick:s=>L.obtenerCajasC(a.row),"data-toggle":"tooltip","data-placement":"top",title:"Ver cajas",class:(0,l.C_)(["letter","badge badge-success  text-white font-weight-bold"])},[(0,t.Uk)((0,l.zw)(a.row.cantidadC)+" ",1),J],8,Z)])),_:1},8,["data","columns","options"])):((0,t.wg)(),(0,t.iD)("div",W,(0,l.zw)("No se encuentran registros!")))])],512),[[r.F8,$.sucursalA]]),(0,t.wy)((0,t._)("div",null,[G,$.sucursalesCerradas[0]?((0,t.wg)(),(0,t.j4)(ca,{key:0,ref:"table",data:$.sucursalesCerradas,columns:$.optionc.columns,options:$.optionc},{direccion:(0,t.w5)((a=>[(0,t._)("p",null,[(0,t.Uk)((0,l.zw)(a.row.direccion)+" ",1),(0,t._)("a",{"data-toggle":"modal",onClick:s=>L.generarMapa(a.row.latitud,a.row.longitud),"data-target":"#exampleModalCenter",class:(0,l.C_)(["letter","badge badge-primary ml-1 font-weight-bold"])},Q,8,H)])])),cantidadA:(0,t.w5)((a=>[(0,t._)("a",{onClick:s=>L.obtenerCajasA(a.row),class:(0,l.C_)(["letter","badge badge-secondary  text-white font-weight-bold"])},(0,l.zw)(a.row.cantidadA),9,X)])),cantidadC:(0,t.w5)((a=>[(0,t._)("a",{onClick:s=>L.obtenerCajasC(a.row),class:(0,l.C_)(["letter","badge badge-success  text-white font-weight-bold"])},(0,l.zw)(a.row.cantidadC),9,Y)])),_:1},8,["data","columns","options"])):((0,t.wg)(),(0,t.iD)("div",aa,(0,l.zw)("No se encuentran registros!")))],512),[[r.F8,$.sucursalC]])])])]),(0,t._)("div",sa,[(0,t._)("div",ea,[(0,t._)("div",ta,[la,(0,t._)("div",ra,[(0,t._)("div",oa,null,512)]),ia])])])])):((0,t.wg)(),(0,t.j4)(na,{key:1}))])}e(57658);var na=e(29646),da=e(15866),ua=e(11393),ma=e(49161),ga=e(28666);na.kL.register(na.qi,na.u,na.De);var Ca={name:"sucursales",mounted(){this.fetchSucursales()},beforeDestroy(){clearTimeout(this.timeoutId)},beforeRouteLeave(a,s,e){clearTimeout(this.timeoutId),e()},components:{Pie:da.by,loading:ga.Z,ServerTable:ma.wv},data(){return{sucursalcantA:"",sucursalcantC:"",sucursal:"",message:"",timeoutId:null,sucursalA:!0,sucursalC:!1,sucursales:!1,TextoBuscado:"",chartOptions:{maintainAspectRatio:!1},sucursalesAbiertas:[],sucusalesPremiun:[],sucursalesCerradas:[],cajasAbiertas:[],cajasCerradas:[],chartData:{labels:["January","February","March"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF"],data:[40,20,12]}]},columns:["descripcion","telefono","direccion","cantidadA","cantidadC"],options:{columnsClasses:{cantidadA:"ancho-columna",cantidadC:"ancho-columna",descripcion:"ancho-columna1",direccion:"ancho-columna1"},sortIcon:{is:"fa-sort",base:"fa",up:"fa-sort-asc",down:"fa-sort-desc"},texts:{count:"Mostrando {from} a {to} de {count} registros |{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Filtro:",filterPlaceholder:"Búsqueda",limit:"Registros:",page:"Pagina:",noResults:"No hay registros coincidentes",noRequest:"Seleccione al menos un filtro para obtener resultados",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},perPage:10,perPageValues:[10,25,50,100,500],headings:{descripcion:"NOMBRE",telefono:"TELÉFONO",direccion:"DIRECCIÓN",cantidadA:"CAJAS ABIERTAS",cantidadC:"CAJAS CERRADAS"}},optionc:{columns:["descripcion","telefono","direccion"],sortIcon:{is:"fa-sort",base:"fa",up:"fa-sort-asc",down:"fa-sort-desc"},texts:{count:"Mostrando {from} a {to} de {count} registros |{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Filtro:",filterPlaceholder:"Búsqueda",limit:"Registros:",page:"Pagina:",noResults:"No hay registros coincidentes",noRequest:"Seleccione al menos un filtro para obtener resultados",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},perPage:10,perPageValues:[10,25,50,100,500],headings:{descripcion:"SUCURSAL",telefono:"TELEFONO",direccion:"DIRECCIÓN"}}}},methods:{generarMapa(a,s){this.$options.markers=new Array;var e=this.$refs.elMap;setTimeout((function(){const t=L.map(e).setView([a,s],10);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',maxZoom:18}).addTo(t);L.marker([a,s]).addTo(t)}),1e3)},obtenerCajasA(a){console.log(a.identificador),this.$router.push({name:"Cajas",query:{datos:a.identificador,caja:0}})},obtenerCajasC(a){console.log(a.identificador),this.$router.push({name:"Cajas",query:{datos:a.identificador,caja:1}})},selecionar(a){1==a&&(this.sucursalA=!0,this.sucursalC=!1),2==a&&(this.sucursalA=!1,this.sucursalC=!0)},async fetchSucursales(){await this.getAllsucursales(),this.timeoutId=setTimeout(this.fetchSucursales,3e5)},async getAllsucursales(){try{const a=await ua.Z.getSucursalesCajas();this.sucursalcantA=a.sdtSucursalesCajas.sucursalesAbiertas,this.sucursalcantC=a.sdtSucursalesCajas.sucursalesCerradas,a.Erroresnegocio&&a.Erroresnegocio.BTErrorNegocio[0]&&(this.message=a.Erroresnegocio.BTErrorNegocio[0].Descripcion,"Sesión inválida"===this.message&&setTimeout((()=>{ua.Z.logout(),this.$store.dispatch("logout"),this.$router.push("/login")}),3e3)),this.sucursales=!0,this.sucursalesAbiertas=a.sdtSucursalesCajas.listadoSucursalesA.SdtsBTSucursal,this.sucursalesCerradas=a.sdtSucursalesCajas.listadoSucursalesC.SdtsBTSucursal,this.cajasAbiertas=a.sdtSucursalesCajas.listadoCajasA.SdtsBTCaja,this.cajasCerradas=a.sdtSucursalesCajas.listadoCajasC.SdtsBTCaja,this.chartData={labels:["Abiertas","Cerradas"],datasets:[{backgroundColor:["#525e5e","#41B883"],data:[a.sdtSucursalesCajas.sucursalesAbiertas,a.sdtSucursalesCajas.sucursalesCerradas]}]};let s=this.sucursalesAbiertas.map((a=>{let s=this.cajasAbiertas.filter((s=>s.sucursalId===a.identificador)),e=this.cajasCerradas.filter((s=>s.sucursalId===a.identificador));return a.cantidadA=s.length,a.cantidadC=e.length,a}));this.sucusalesPremiun=s,$(document).ready((function(){$(".VuePagination__count").text((function(a,s){return s.replace("Un registro","1 registro")})),$(".VueTables__search-field label").hide(),$(".VueTables__limit-field label").hide(),$(".VuePagination__pagination").addClass("justify-content-center")}))}catch(a){console.error("Error al obtener sucursales y cajas:",a)}}},computed:{myStyles(){return{height:"325px"}}}},pa=e(40089);const ha=(0,pa.Z)(Ca,[["render",ca]]);var fa=ha}}]);
//# sourceMappingURL=877.0c428dca.js.map