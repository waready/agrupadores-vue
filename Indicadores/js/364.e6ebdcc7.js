"use strict";(self["webpackChunkIndicadores"]=self["webpackChunkIndicadores"]||[]).push([[364],{90146:function(e,s,o){o.r(s),o.d(s,{default:function(){return O}});var t=o(73396),a=o(87139),i=o(49242);const r={class:"container"},c=(0,t._)("h2",null,"Servicios Ejecutados",-1),l={key:0},n=(0,t._)("hr",null,null,-1),d={class:"row"},u={class:"col-6 d-flex justify-content-center"},m={class:"col-6"},g={class:"row"},h={class:"card mb-3"},p={class:"card-content"},v={class:"card-body"},f={class:"media d-flex"},_={class:"align-self-center"},b={class:"media-body"},C={class:"d-inline-block text-truncate",style:{"max-width":"140px","font-size":"smaller"}},y={class:"ml-3"},w=(0,t._)("hr",null,null,-1),j=(0,t._)("ul",{class:"nav nav-tabs mb-1"},null,-1),E={class:"row"},S={class:"col-md-12 card"},F={class:"card-body"},x=(0,t._)("h3",null,"Detalle de Servicios",-1),D={class:""},T=["onClick"],k=(0,t._)("i",{class:"fas fa-eye text-white"},null,-1),P=[k];function A(e,s,o,k,A,M){const $=(0,t.up)("Pie"),I=(0,t.up)("v-client-table"),B=(0,t.up)("loading");return(0,t.wg)(),(0,t.iD)("div",r,[c,(0,t.wy)((0,t._)("div",{class:"alert alert-warning",role:"alert"},(0,a.zw)(A.message+"!"),513),[[i.F8,A.message]]),A.sucursales?((0,t.wg)(),(0,t.iD)("div",l,[n,(0,t._)("div",d,[(0,t._)("div",u,[(0,t.Wm)($,{id:"my-chart-id",data:A.chartData,style:(0,a.j5)(M.myStyles),options:A.optionsChar},null,8,["data","style","options"])]),(0,t._)("div",m,[(0,t._)("div",g,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(A.ServiciosEjecutados,((e,s)=>((0,t.wg)(),(0,t.iD)("div",{class:"col-6 text-truncate",key:e.servicio},[(0,t._)("div",h,[(0,t._)("div",p,[(0,t._)("div",v,[(0,t._)("div",f,[(0,t._)("div",_,[(0,t._)("i",{class:"icon-pie-chart font-large-1 float-left",style:(0,a.j5)({color:M.getOrderedColor(s)})},null,4)]),(0,t._)("div",b,[(0,t._)("span",C,(0,a.zw)(e.servicio),1),(0,t._)("p",y,(0,a.zw)(e.cantidadEjecuciones),1)])])])])])])))),128))])])]),w,j,(0,t._)("div",E,[(0,t._)("div",S,[(0,t._)("div",F,[(0,t.wy)((0,t._)("div",null,[x,(0,t._)("div",D,[(0,t.Wm)(I,{ref:"table",data:A.ServiciosEjecutados,columns:A.columns,options:A.options},{metodo:(0,t.w5)((e=>[(0,t._)("a",{onClick:s=>M.obtenerCajasC(e.row),"data-toggle":"tooltip","data-placement":"top",title:"Ver cajas",class:(0,a.C_)(["letter","badge badge-success  text-white font-weight-bold"])},P,8,T)])),_:1},8,["data","columns","options"])])],512),[[i.F8,A.sucursalA]])])])])])):((0,t.wg)(),(0,t.j4)(B,{key:1}))])}o(57658);var M=o(29646),I=o(15866),B=o(11393),V=o(49161),R=o(28666);M.kL.register(M.qi,M.u,M.De);var q={name:"servicios",mounted(){this.fetchServicios()},beforeDestroy(){clearTimeout(this.timeoutId)},beforeRouteLeave(e,s,o){clearTimeout(this.timeoutId),o()},components:{Pie:I.by,loading:R.Z,ServerTable:V.wv},data(){return{sucursalcantA:"",sucursalcantC:"",sucursal:"",message:"",timeoutId:null,sucursalA:!0,sucursalC:!1,sucursales:!1,TextoBuscado:"",ServiciosEjecutados:[],chartData:{labels:["January","February","March"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF"],data:[40,20,12]}]},optionsChar:{maintainAspectRatio:!1},columns:["servicio","cantidadEjecuciones","tiempoPromedio","tiempoMaximo","tiempoMinimo","metodo"],options:{columnsClasses:{cantidadA:"ancho-columna",cantidadC:"ancho-columna",descripcion:"ancho-columna1",direccion:"ancho-columna1"},sortIcon:{is:"fa-sort",base:"fa",up:"fa-sort-asc",down:"fa-sort-desc"},texts:{count:"Mostrando {from} a {to} de {count} registros |{count} registros|Un registro",first:"Primero",last:"Ultimo",filter:"Filtro:",filterPlaceholder:"Búsqueda",limit:"Registros:",page:"Pagina:",noResults:"No hay registros coincidentes",noRequest:"Seleccione al menos un filtro para obtener resultados",filterBy:"Filtrar por {column}",loading:"Cargando...",defaultOption:"Seleccionar {column}",columns:"Columnas"},perPage:10,perPageValues:[10,25,50,100,500],headings:{servicio:"Nombre",cantidadEjecuciones:"Cantidad ejecuciones",tiempoPromedio:"Tiempo promedio",tiempoMaximo:"Tiempo máx",tiempoMinimo:"Tiempo mín",metodo:"Métodos"}}}},methods:{getAdjustedColor(e){const s=Math.max(0,parseInt(e.slice(1),16)-50),o=`#${s.toString(16).padStart(6,"0").toUpperCase()}`;return o},obtenerCajasC(e){console.log(e.servicio),this.$router.push({name:"Metodos",query:{datos:e.servicio}})},getOrderedColor(e){const s=["#FF5454","#FFFF90","#60C1FF","#FFC670","#8CC76D","#C187E8","#5D5A5D"];let o=s[e%s.length];return e>=s.length&&(o=this.getAdjustedColor(o)),o},async fetchServicios(){await this.getAllsucursales(),this.timeoutId=setTimeout(this.fetchServicios,3e5)},async getAllsucursales(){try{const e=await B.Z.getEjecucionPorServicio();e.Erroresnegocio&&e.Erroresnegocio.BTErrorNegocio[0]&&(this.message=e.Erroresnegocio.BTErrorNegocio[0].Descripcion,"Sesión inválida"===this.message&&setTimeout((()=>{B.Z.logout(),this.$store.dispatch("logout"),this.$router.push("/login")}),3e3)),this.sucursales=!0,this.ServiciosEjecutados=e.sdtEstadisticasServicios.sBTEstadisticasServicio,this.chartData={datasets:[{label:"Cantidad de Ejecuciones",backgroundColor:this.ServiciosEjecutados.map(((e,s)=>this.getOrderedColor(s))),data:this.ServiciosEjecutados.map((e=>e.cantidadEjecuciones))}]},$(document).ready((function(){$(".VuePagination__count").text((function(e,s){return s.replace("Un registro","1 registro")})),$(".VueTables__search-field label").hide(),$(".VueTables__limit-field label").hide(),$(".VuePagination__pagination").addClass("justify-content-center")}))}catch(e){console.error("Error al obtener sucursales y cajas:",e)}}},computed:{myStyles(){return{height:"350px"}}}},z=o(40089);const N=(0,z.Z)(q,[["render",A]]);var O=N}}]);
//# sourceMappingURL=364.e6ebdcc7.js.map